// Generated by CoffeeScript 1.6.2
(function() {
<<<<<<< HEAD
  define(["libs/backbone", "libs/underscore"], function() {
=======
  define(["backbone", "underscore"], function() {
>>>>>>> gh-pages
    var LayoutView;

    LayoutView = Backbone.View.extend({
      initialize: function() {
        _.bindAll(this);
        this.$el = $(this.el);
        this.total = 0;
        this.model = new Backbone.Model(JSON.parse(this.$('.data').html()));
        this.model.set('images', _.shuffle(this.model.get('images')));
        _.each(this.model.get('images'), this.addCell);
        this.makeGrid();
      },
<<<<<<< HEAD
      template: _.template("<div class=\"cell\">\n	<div class=\"image\" style=\"background-image: url('/assets/img/lookwork/<%= arguments[0] %>');\">\n\n	</div>\n</div>"),
      addCell: function(img) {
        var cell, height, span, width;

        cell = $(this.template(img));
        span = Math.ceil(Math.random() * 3);
        this.columnWidth = 130;
        this.marginWidth = 20;
        width = ((this.columnWidth + this.marginWidth) * span) - this.marginWidth;
        height = width * 0.67;
        if (Math.random() < 0.3) {
          height = width * 1.5;
        } else if (Math.random() < 0.6) {
          height = width;
        }
        if (width === 130) {
          height = 130;
        }
        height = width;
        cell.css({
          width: "" + width + "px",
          height: "" + height + "px"
        });
        if (Math.random() < 0.333333) {
          cell.addClass('left');
        } else if (Math.random() < 0.66666) {
          cell.addClass('center');
        } else {
          cell.addClass('right');
        }
        if (Math.random() < 0.5) {
          cell.addClass('bottom');
        }
        this.$el.append(cell);
=======
      template: _.template("<div class=\"cell\">\n	<div class=\"image\" style=\"background-image:url('/assets/img/lookwork/<%= arguments[0] %>');\"></div>\n</div>"),
      sizes: ["square-1col", "square-2col", "square-3col", "portrait-2col", "landscape-3col"],
      addCell: function(img) {
        var cell, size;

        cell = $(this.template(img));
        size = this.sizes[Math.floor(Math.random() * this.sizes.length)];
        console.log(size);
        cell.addClass(size);
        this.$el.append(cell);
        this.columnWidth = 130;
        this.marginWidth = 20;
>>>>>>> gh-pages
      },
      makeGrid: function() {
        $('#grid').isotope({
          masonry: {
            columnWidth: this.columnWidth + this.marginWidth
          }
        });
      }
    });
    return LayoutView;
  });

}).call(this);
